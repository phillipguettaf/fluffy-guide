{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/main/webapp/dev/js/common/const.js","webpack:///./src/main/webapp/dev/js/common/helper.js","webpack:///./src/main/webapp/dev/js/common/sortBy.js","webpack:///./src/main/webapp/dev/js/common/crypto.js","webpack:///./src/main/webapp/dev/js/common/scrollTo.js","webpack:///./src/main/webapp/dev/js/common/onStart.js","webpack:///./src/main/webapp/dev/js/common/statusMessage.js","webpack:///./src/main/webapp/dev/js/common/bootboxWrapper.js","webpack:///./src/main/webapp/dev/js/common/instructor.js","webpack:///./src/main/webapp/dev/js/common/countRemainingCharactersOnInput.js","webpack:///./src/main/webapp/dev/js/common/timezone.js","webpack:///./src/main/webapp/dev/js/common/ui.js","webpack:///./src/main/webapp/dev/js/common/remindModal.js","webpack:///./src/main/webapp/dev/js/common/instructorFeedbackResults.js","webpack:///./src/main/webapp/dev/js/common/student.js","webpack:///./src/main/webapp/dev/js/main/studentFeedbackResults.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","BootstrapContextualColors","SUCCESS","INFO","WARNING","DANGER","PRIMARY","isValidType","type","DEFAULT","Const","ModalDialog","UNREGISTERED_STUDENT","header","text","StatusMessages","INSTRUCTOR_DETAILS_LENGTH_INVALID","ParamsNames","SESSION_TOKEN","COPIED_FEEDBACK_SESSION_NAME","COURSE_ID","COURSE_NAME","COURSE_TIME_ZONE","FEEDBACK_SESSION_NAME","FEEDBACK_SESSION_STARTDATE","FEEDBACK_SESSION_STARTTIME","FEEDBACK_SESSION_VISIBLEDATE","FEEDBACK_SESSION_VISIBLETIME","FEEDBACK_SESSION_PUBLISHDATE","FEEDBACK_SESSION_PUBLISHTIME","FEEDBACK_SESSION_TIMEZONE","FEEDBACK_SESSION_SESSIONVISIBLEBUTTON","FEEDBACK_SESSION_RESULTSVISIBLEBUTTON","FEEDBACK_SESSION_ENABLE_EDIT","FEEDBACK_QUESTION_TEXT","FEEDBACK_QUESTION_DESCRIPTION","FEEDBACK_QUESTION_TYPE","FEEDBACK_QUESTION_NUMBEROFCHOICECREATED","FEEDBACK_QUESTION_MCQCHOICE","FEEDBACK_QUESTION_MCQ_WEIGHT","FEEDBACK_QUESTION_MSQCHOICE","FEEDBACK_QUESTION_CONSTSUMOPTION","FEEDBACK_QUESTION_CONSTSUMTORECIPIENTS","FEEDBACK_QUESTION_CONSTSUMPOINTS","FEEDBACK_QUESTION_CONSTSUMPOINTSFOREACHOPTION","FEEDBACK_QUESTION_CONSTSUMPOINTSFOREACHRECIPIENT","FEEDBACK_QUESTION_CONSTSUMALLUNEVENDISTRIBUTION","FEEDBACK_QUESTION_CONSTSUMSOMEUNEVENDISTRIBUTION","FEEDBACK_QUESTION_CONSTSUMNOUNEVENDISTRIBUTION","FEEDBACK_QUESTION_RECIPIENTTYPE","FEEDBACK_QUESTION_NUMBEROFENTITIESTYPE","FEEDBACK_QUESTION_EDITTEXT","FEEDBACK_QUESTION_DISCARDCHANGES","FEEDBACK_QUESTION_EDITTYPE","FEEDBACK_QUESTION_SAVECHANGESTEXT","FEEDBACK_QUESTION_SHOWRESPONSESTO","FEEDBACK_QUESTION_SHOWGIVERTO","FEEDBACK_QUESTION_SHOWRECIPIENTTO","FEEDBACK_QUESTION_NUMSCALE_MIN","FEEDBACK_QUESTION_NUMSCALE_MAX","FEEDBACK_QUESTION_NUMSCALE_STEP","FEEDBACK_QUESTION_RANKOPTION","FEEDBACK_QUESTION_RANKTORECIPIENTS","FEEDBACK_QUESTION_NUMBER","FEEDBACK_QUESTION_NUMBER_STATIC","FEEDBACK_QUESTION_RANK_IS_MIN_OPTIONS_TO_BE_RANKED_ENABLED","FEEDBACK_QUESTION_RANK_IS_MAX_OPTIONS_TO_BE_RANKED_ENABLED","FEEDBACK_QUESTION_RANK_MIN_OPTIONS_TO_BE_RANKED","FEEDBACK_QUESTION_RANK_MAX_OPTIONS_TO_BE_RANKED","FEEDBACK_QUESTION_RANK_IS_MIN_RECIPIENTS_TO_BE_RANKED_ENABLED","FEEDBACK_QUESTION_RANK_IS_MAX_RECIPIENTS_TO_BE_RANKED_ENABLED","FEEDBACK_QUESTION_RANK_MIN_RECIPIENTS_TO_BE_RANKED","FEEDBACK_QUESTION_RANK_MAX_RECIPIENTS_TO_BE_RANKED","isDate","date","Number","isNaN","Date","parse","isNumber","num","isWithinView","element","rect","$","getBoundingClientRect","$viewport","window","top","left","right","width","bottom","height","extractIdSuffixFromId","_ref","arguments","length","undefined","idPrefix","id","RegExp","exec","_helper","isDefined","varToCheck","getPointValue","ditchZero","s0","indexOf","replace","parseFloat","Comparators","x","y","x0","y0","a","b","a0","b0","sortNum","sortBase","columnType","sortDate","Extractors","$tableCell","find","attr","data","textExtractor","TableButtonHelpers","$button","parents","idx","parent","children","index","$table","removeClass","addClass","this","clearAllSortStates","getEnclosingTable","toggleSort","comparatorStringOrNull","extractorStringOrNull","shouldSortAscending","hasClass","colIdx","comparatorOrNull","extractorOrNull","store","$rowList","cells","extractor","getDefaultExtractor","textToCompare","trim","push","comparator","getDefaultComparator","sort","compareResult","toUpperCase","$tbody","size","j","appendChild","sortTable","getColumnPositionOfButton","setButtonToSortedAscending","setButtonToSortedDescending","_const","getCookie","cookieNameToFind","cookies","document","cookie","split","map","cookieName","cookieValue","makeCsrfTokenParam","updateCsrfTokenInInputFields","updatedToken","val","scrollToPosition","scrollPos","duration","scrollTop","animate","scrollToElement","opts","defaultOptions","options","offset","isViewType","navbar","navbarHeight","offsetHeight","footer","footerHeight","isElementTallerThanWindow","innerHeight","isFromAbove","scrollY","offsetTop","isAlignedToTop","scrollToTop","_crypto","_sortBy","String","includes","search","startParam","start","on","e","currentTarget","$tooltips","tooltip","html","container","DocumentTouch","each","submit","_scrollTo","DIV_STATUS_MESSAGE","buildNewStatusMessageDiv","message","bootstrapContextualColor","$newStatusMessageDivContent","contextualColor","populateStatusMessageDiv","$statusMessageDivToUser","$statusMessageDivContent","empty","append","appendNewStatusMessage","$statusMessagesDivToUser","show","appendStatusMessage","messages","$statusMessagesToUser","clearStatusMessages","hide","setStatusMessage","setStatusMessageToForm","form","$copyOfStatusMessagesToUser","clone","remove","prepend","DEFAULT_OK_TEXT","DEFAULT_CANCEL_TEXT","DEFAULT_YES_TEXT","DEFAULT_NO_TEXT","applyStyleToModal","modal","showModalAlert","titleText","messageText","okButtonText","bootbox","dialog","title","buttons","okay","label","className","showModalConfirmation","okCallback","cancelCallback","cancelButtonText","onHiddenCallback","onEscape","cancel","callback","ok","showModalConfirmationWithCancel","yesButtonCallback","noButtonCallback","cancelButtonCallback","yesButtonText","noButtonText","yes","no","_bootboxWrapper","_statusMessage","_countRemainingCharactersOnInput","_timezone","updateHoverShowPictureEvents","actualLink","resolvedLink","off","popover","trigger","placement","content","mouseenter","siblings","mouseleave","setTimeout","obj","bindStudentPhotoLink","elements","event","cancelBubble","stopPropagation","$loadingImage","load","$imageCell","closest","bindStudentPhotoHoverLink","src","outerHTML","loadProfilePictureForHoverEvent","sendRemindersToStudents","urlLink","$statusMessage","ajax","url","beforeSend","css","error","success","statusToUser","attachEventToDeleteStudentLink","preventDefault","$clickedLink","location","attachEventToDeleteAllStudentLink","attachEventToSendInviteLink","bindDeleteButtons","courseId","bindPublishButtons","bindRemindButtons","bindUnpublishButtons","executeCopyCommand","execCommand","initializeTimeZoneOptions","$selectElement","moment","TimeZone","prepareTimeZoneInput","existingTimeZone","updateTimeZone","autoDetectAndUpdateTimeZone","prepareInstructorPages","resendPublishedEmailToStudents","selectElementContents","elementNode","body","range","createRange","getSelection","selection","removeAllRanges","selectNodeContents","addRange","selectNode","createTextRange","moveToElementText","select","setupFsCopyModal","button","relatedTarget","actionlink","courseid","fsname","appUrl","origin","currentPage","href","substring","encodeURIComponent","prop","countRemainingCharactersOnInput","$this","$copyModalStatusMessage","serialize","errorMessage","redirectUrl","computeRemainingCharactersCount","$textInput","remainingCharactersElementId","maxLength","currentLength","textInputId","remainingCharactersTemplate","insertAfter","insertRemainingCharactersCount","isSupportedByJava","EST","GMT+0","GMT-0","HST","MST","ROC","addLeadingZeroes","tz","names","filter","forEach","createElement","zone","utcOffset","hr","Math","floor","abs","min","displayUtcOffset","detectedTimeZone","guess","timeZone","setChevronToUp","chevronContainer","setChevronToDown","showSingleCollapse","heading","glyphIcon","collapse","hideSingleCollapse","addLoadingIndicator","loadingText","disallowNonNumericEntries","decimalPointAllowed","negativeAllowed","which","ctrlKey","shiftKey","highlightSearchResult","searchKeyId","sectionToHighlight","searchKey","searchKeyList","charAt","highlight","removeLoadingIndicator","displayText","toggleAdditionalQuestionInfo","identifier","$questionButton","toggle","toggleChevron","clickedElement","$clickedElement","isChevronDown","$chevronContainer","clearQueue","toggleSingleCollapse","target","is","_instructor","prepareRemindModal","cache","$studentsNotResponded","populateCheckBoxes","checked","$form","_remindModal","_ui","submitFormAjax","formData","ajaxStatus","retryButtonHtml","isError","table","sessionResultsHtmlTableAsString","statusForAjax","showHideStats","expandPanel","panel","timeOut","isAjaxLoadedPanel","$elementToClickForAjaxLoading","$elementWithAjaxClass","getElementToClickForAjaxLoading","click","replaceButtonHtmlAndTooltipText","from","to","htmlString","tooltipString","expandOrCollapsePanels","expandCollapseButton","panels","targetPanels","startsWith","areAjaxLoadedPanels","expandPanels","collapsePanels","bindCollapseEvents","nPanels","numPanels","bodyCollapse","sectionIndex","isSectionPanel","sectionBody","next","match","displayAjaxRetryMessageForPanelHeading","$element","ajaxErrorStart","isEmptySection","toggleNoResponsePanel","$targetElement","$panel","$remindButton","prepareInstructorFeedbackResultsPage","childPanelType","change","printThis","importCSS","importStyle","loadCSS","panelHeading","displayIcon","formObject","panelCollapse","remindButtonContent","appendedResponseStatus","getAppendedResponseRateData","$panelHeading","removeSection","seeMoreRequest","panelBody","$sectionBody","$appendedSection","toggleExcludingSelfResultsForRubricStatistics","checkbox","bindLinksInUnregisteredPage","selector","_Const$ModalDialog$UN","_student","_instructorFeedbackResults","ready"],"mappings":"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","file":"studentFeedbackResults.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 34);\n","/**\n * Contains constants to be used across the application.\n */\n\n// Frontend only constants\nconst Const = {\n    ModalDialog: {\n        UNREGISTERED_STUDENT: {\n            header: 'Register for TEAMMATES',\n            text: 'You have to register using a google account in order to access this page. '\n                  + 'Would you like to proceed and register?',\n        },\n    },\n    StatusMessages: {\n        INSTRUCTOR_DETAILS_LENGTH_INVALID: 'Instructor Details must have 3 columns',\n    },\n};\n\n// Shared constants between frontend and backend\n\n/**\n * Subset of Bootstrap contextual colors for use in status messages and components of modals.\n * @enum {BootstrapContextualColors}\n */\nconst BootstrapContextualColors = {\n    // Mirrored colors from StatusMessageColor\n    SUCCESS: 'success',\n    INFO: 'info',\n    WARNING: 'warning',\n    DANGER: 'danger',\n    // Additional contextual colors that can be used in the components of modals\n    PRIMARY: 'primary',\n    isValidType(type) {\n        return type === BootstrapContextualColors.SUCCESS || type === BootstrapContextualColors.INFO\n                || type === BootstrapContextualColors.PRIMARY || type === BootstrapContextualColors.WARNING\n                || type === BootstrapContextualColors.DANGER;\n    },\n};\nBootstrapContextualColors.DEFAULT = BootstrapContextualColors.INFO;\n\n// Mirrored subset of Const#ParamsNames\nconst ParamsNames = {\n    SESSION_TOKEN: 'token',\n    COPIED_FEEDBACK_SESSION_NAME: 'copiedfsname',\n\n    COURSE_ID: 'courseid',\n    COURSE_NAME: 'coursename',\n    COURSE_TIME_ZONE: 'coursetimezone',\n\n    FEEDBACK_SESSION_NAME: 'fsname',\n    FEEDBACK_SESSION_STARTDATE: 'startdate',\n    FEEDBACK_SESSION_STARTTIME: 'starttime',\n    FEEDBACK_SESSION_VISIBLEDATE: 'visibledate',\n    FEEDBACK_SESSION_VISIBLETIME: 'visibletime',\n    FEEDBACK_SESSION_PUBLISHDATE: 'publishdate',\n    FEEDBACK_SESSION_PUBLISHTIME: 'publishtime',\n    FEEDBACK_SESSION_TIMEZONE: 'timezone',\n    FEEDBACK_SESSION_SESSIONVISIBLEBUTTON: 'sessionVisibleFromButton',\n    FEEDBACK_SESSION_RESULTSVISIBLEBUTTON: 'resultsVisibleFromButton',\n    FEEDBACK_SESSION_ENABLE_EDIT: 'editsessiondetails',\n\n    FEEDBACK_QUESTION_TEXT: 'questiontext',\n    FEEDBACK_QUESTION_DESCRIPTION: 'questiondescription',\n    FEEDBACK_QUESTION_TYPE: 'questiontype',\n    FEEDBACK_QUESTION_NUMBEROFCHOICECREATED: 'noofchoicecreated',\n    FEEDBACK_QUESTION_MCQCHOICE: 'mcqOption',\n    FEEDBACK_QUESTION_MCQ_WEIGHT: 'mcqWeight',\n    FEEDBACK_QUESTION_MSQCHOICE: 'msqOption',\n    FEEDBACK_QUESTION_CONSTSUMOPTION: 'constSumOption',\n    FEEDBACK_QUESTION_CONSTSUMTORECIPIENTS: 'constSumToRecipients',\n    FEEDBACK_QUESTION_CONSTSUMPOINTS: 'constSumPoints',\n    FEEDBACK_QUESTION_CONSTSUMPOINTSFOREACHOPTION: 'constSumPointsForEachOption',\n    FEEDBACK_QUESTION_CONSTSUMPOINTSFOREACHRECIPIENT: 'constSumPointsForEachRecipient',\n    FEEDBACK_QUESTION_CONSTSUMALLUNEVENDISTRIBUTION: 'All options',\n    FEEDBACK_QUESTION_CONSTSUMSOMEUNEVENDISTRIBUTION: 'At least some options',\n    FEEDBACK_QUESTION_CONSTSUMNOUNEVENDISTRIBUTION: 'None',\n    FEEDBACK_QUESTION_RECIPIENTTYPE: 'recipienttype',\n    FEEDBACK_QUESTION_NUMBEROFENTITIESTYPE: 'numofrecipientstype',\n    FEEDBACK_QUESTION_EDITTEXT: 'questionedittext',\n    FEEDBACK_QUESTION_DISCARDCHANGES: 'questiondiscardchanges',\n    FEEDBACK_QUESTION_EDITTYPE: 'questionedittype',\n    FEEDBACK_QUESTION_SAVECHANGESTEXT: 'questionsavechangestext',\n    FEEDBACK_QUESTION_SHOWRESPONSESTO: 'showresponsesto',\n    FEEDBACK_QUESTION_SHOWGIVERTO: 'showgiverto',\n    FEEDBACK_QUESTION_SHOWRECIPIENTTO: 'showrecipientto',\n    FEEDBACK_QUESTION_NUMSCALE_MIN: 'numscalemin',\n    FEEDBACK_QUESTION_NUMSCALE_MAX: 'numscalemax',\n    FEEDBACK_QUESTION_NUMSCALE_STEP: 'numscalestep',\n    FEEDBACK_QUESTION_RANKOPTION: 'rankOption',\n    FEEDBACK_QUESTION_RANKTORECIPIENTS: 'rankToRecipients',\n    FEEDBACK_QUESTION_NUMBER: 'questionnum',\n    FEEDBACK_QUESTION_NUMBER_STATIC: 'questionnum-static',\n    FEEDBACK_QUESTION_RANK_IS_MIN_OPTIONS_TO_BE_RANKED_ENABLED: 'minOptionsToBeRankedEnabled',\n    FEEDBACK_QUESTION_RANK_IS_MAX_OPTIONS_TO_BE_RANKED_ENABLED: 'maxOptionsToBeRankedEnabled',\n    FEEDBACK_QUESTION_RANK_MIN_OPTIONS_TO_BE_RANKED: 'minOptionsToBeRanked',\n    FEEDBACK_QUESTION_RANK_MAX_OPTIONS_TO_BE_RANKED: 'maxOptionsToBeRanked',\n    FEEDBACK_QUESTION_RANK_IS_MIN_RECIPIENTS_TO_BE_RANKED_ENABLED: 'minRecipientsToBeRankedEnabled',\n    FEEDBACK_QUESTION_RANK_IS_MAX_RECIPIENTS_TO_BE_RANKED_ENABLED: 'maxRecipientsToBeRankedEnabled',\n    FEEDBACK_QUESTION_RANK_MIN_RECIPIENTS_TO_BE_RANKED: 'minRecipientsToBeRanked',\n    FEEDBACK_QUESTION_RANK_MAX_RECIPIENTS_TO_BE_RANKED: 'maxRecipientsToBeRanked',\n};\n\nexport {\n    Const,\n    ParamsNames,\n    BootstrapContextualColors,\n};\n","/**\n * Tests whether the passed object is an actual date\n * with an accepted format\n *\n * Allowed formats : http://dygraphs.com/date-formats.html\n *\n * TEAMMATES currently follows the RFC2822 / IETF date syntax\n * e.g. 02 Apr 2012, 23:59\n *\n * @param date\n * @returns boolean\n */\nfunction isDate(date) {\n    return !Number.isNaN(Date.parse(date));\n}\n\n/**\n* Function to test if param is a numerical value\n* @param num\n* @returns boolean\n*/\nfunction isNumber(num) {\n    return (typeof num === 'string' || typeof num === 'number') && !Number.isNaN(num - 0) && num !== '';\n}\n\n/**\n * Checks if element is within browser's viewport.\n * @return true if it is within the viewport, false otherwise\n * @see http://stackoverflow.com/q/123999\n */\nfunction isWithinView(element) {\n    const baseElement = $(element)[0]; // unwrap jquery element\n    const rect = baseElement.getBoundingClientRect();\n\n    const $viewport = $(window);\n\n    // makes the viewport size slightly larger to account for rounding errors\n    const tolerance = 0.25;\n    return (\n        rect.top >= 0 - tolerance // below the top of viewport\n        && rect.left >= 0 - tolerance // within the left of viewport\n        && rect.right <= $viewport.width() + tolerance // within the right of viewport\n        && rect.bottom <= $viewport.height() + tolerance // above the bottom of viewport\n    );\n}\n\n/**\n * Extracts the suffix that follows the prefix from the id. For example, commentDelete-1-1-0-1 => 1-1-0-1.\n * @param {Object} options required options\n * @param {string} options.idPrefix the prefix of the id\n * @param {string} options.id the id to extract from\n * @return {string} the suffix that uniquely identifies an element among elements with the same prefix\n */\nfunction extractIdSuffixFromId({ idPrefix, id } = {}) {\n    return new RegExp(`${idPrefix}-(.*)`).exec(id)[1];\n}\n\nexport {\n    isDate,\n    isNumber,\n    isWithinView,\n    extractIdSuffixFromId,\n};\n","import {\n    isDate,\n    isNumber,\n} from './helper';\n\n/**\n * Returns false if the parameter is either one of null or undefined.\n * Returns true otherwise.\n *\n * @param varToCheck\n */\nfunction isDefined(varToCheck) {\n    return varToCheck !== null && varToCheck !== undefined;\n}\n\n/**\n * To get point value from a formatted string\n *\n * @param s\n *     A table cell (td tag) that contains the formatted string\n * @param ditchZero\n *     Whether 0% should be treated as lower than -90 or not\n * @returns\n */\nfunction getPointValue(s, ditchZero) {\n    let s0 = s;\n    const baseValue = 100;\n\n    if (s0.indexOf('/') !== -1) {\n        // magic expressions below as these cases will only be compared with\n        // case E +(-)X% (0 <= X <= 100)\n        if (s0.indexOf('S') !== -1) {\n            return (2 * baseValue) + 1; // Case N/S (feedback contribution not sure)\n        }\n\n        return (2 * baseValue) + 2; // Case N/A\n    }\n\n    if (s0 === '0%') { // Case 0%\n        if (ditchZero) {\n            return 0;\n        }\n        return baseValue;\n    }\n\n    s0 = s0.replace('E', '').replace('%', ''); // Case E +(-)X%\n\n    if (s0 === '') {\n        return baseValue; // Case E\n    }\n\n    return baseValue + parseFloat(s0); // Other typical cases\n}\n\n/**\n * Sorting comparison functions.\n */\nclass Comparators {\n    /**\n     * The base comparator (ascending)\n     * @returns 1 if x comes after y, -1 if x comes before y, 0 if they are the same\n     */\n    static sortBase(x, y) {\n        // Text sorting\n        if (x < y) {\n            return -1;\n        }\n        return x > y ? 1 : 0;\n    }\n\n    /**\n     * Comparator for numbers (integer, double) (ascending)\n     * @returns +ve if x > y, -ve if x < y and 0 otherwise\n     */\n    static sortNum(x, y) {\n        return x - y;\n    }\n\n    /**\n     * Comparator for date. Allows for the same format as isDate()\n     * @returns 1 if Date x is after y, 0 if same and -1 if before\n     */\n    static sortDate(x, y) {\n        const x0 = Date.parse(x);\n        const y0 = Date.parse(y);\n        if (x0 > y0) {\n            return 1;\n        }\n        return x0 < y0 ? -1 : 0;\n    }\n\n    /**\n     * Comparator to sort strings in format: E([+-]x%) | N/A | N/S | 0% with\n     * possibly a tag that surrounds it.\n     */\n    static sortByPoints(a, b) {\n        const a0 = getPointValue(a, true);\n        const b0 = getPointValue(b, true);\n        if (isNumber(a0) && isNumber(b0)) {\n            return Comparators.sortNum(a0, b0);\n        }\n        return Comparators.sortBase(a0, b0);\n    }\n\n    /**\n     * Comparator to sort strings in format: [+-]x% | N/A with possibly a tag that\n     * surrounds it.\n     */\n    static sortByDiff(a, b) {\n        const a0 = getPointValue(a, false);\n        const b0 = getPointValue(b, false);\n        if (isNumber(a0) && isNumber(b0)) {\n            return Comparators.sortNum(a0, b0);\n        }\n        return Comparators.sortBase(a0, b0);\n    }\n\n    static getDefaultComparator(columnType) {\n        let defaultComparator;\n\n        if (columnType === 1) {\n            defaultComparator = Comparators.sortNum;\n        } else if (columnType === 2) {\n            defaultComparator = Comparators.sortDate;\n        } else {\n            defaultComparator = Comparators.sortBase;\n        }\n\n        return defaultComparator;\n    }\n}\n\n/**\n * Functions that pull data out of a table cell.\n */\nclass Extractors {\n    static textExtractor($tableCell) {\n        return $tableCell.text();\n    }\n\n    static tooltipExtractor($tableCell) {\n        return $tableCell.find('span').attr('data-original-title');\n    }\n\n    static dateStampExtractor($tableCell) {\n        return $tableCell.data('dateStamp');\n    }\n\n    static getDefaultExtractor() {\n        return Extractors.textExtractor;\n    }\n}\n\nclass TableButtonHelpers {\n    /**\n     * Given a button, get the innermost table enclosing it.\n     */\n    static getEnclosingTable($button) {\n        return $($button.parents('table')[0]);\n    }\n\n    /**\n     * Given a button and an index idx,\n     * find the button's column position in the table\n     * where the columns are treated as idx-indexed.\n     */\n    static getColumnPositionOfButton($button, idx) {\n        return $button.parent().children().index($button) + idx;\n    }\n\n    /**\n     * Given a table, clear all the sort states.\n     */\n    static clearAllSortStates($table) {\n        $table.find('.icon-sort').attr('class', 'icon-sort unsorted'); // clear the icons\n        $table.find('.button-sort-ascending')\n                .removeClass('button-sort-ascending')\n                .addClass('button-sort-none');\n        $table.find('.button-sort-descending')\n                .removeClass('button-sort-descending')\n                .addClass('button-sort-none');\n    }\n\n    /**\n     * Given a button in table, set its state to sorted ascending.\n     * Clear all other button states.\n     */\n    static setButtonToSortedAscending($button) {\n        this.clearAllSortStates(this.getEnclosingTable($button));\n        $button.addClass('button-sort-ascending');\n        $button.find('.icon-sort').attr('class', 'icon-sort sorted-ascending'); // set the icon to ascending\n    }\n\n    /**\n     * Given a button in table, set its state to sorted descending.\n     * Clear all other button states.\n     */\n    static setButtonToSortedDescending($button) {\n        this.clearAllSortStates(this.getEnclosingTable($button));\n        $button.addClass('button-sort-descending');\n        $button.find('.icon-sort').attr('class', 'icon-sort sorted-descending'); // set the icon to descending\n    }\n}\n\n// http://stackoverflow.com/questions/7558182/sort-a-table-fast-by-its-first-column-with-javascript-or-jquery\n/**\n * Sorts a table based on certain column and comparator\n *\n * @param $table\n *     A jQuery object representing the table.\n * @param colIdx\n *     The column index (1-based) as key for the sort\n * @param comparatorOrNull\n *     Function to compare two elements.\n *     May be null.\n * @param extractorOrNull\n *     Function to pull out data from a table cell for comparison.\n *     May be null.\n * @param shouldSortAscending\n *     If this is true, sort in ascending order.\n *     Otherwise, sort in descending order\n */\nfunction sortTable($table, colIdx, comparatorOrNull, extractorOrNull, shouldSortAscending) {\n    let columnType = 0;\n    let store = [];\n    const $rowList = $table.find('> tbody > tr');\n\n    // Iterate through column's contents to decide which comparator to use\n    for (let i = 0; i < $rowList.length; i += 1) {\n        if ($rowList[i].cells[colIdx - 1] === undefined) {\n            continue;\n        }\n\n        const extractor = isDefined(extractorOrNull) ? extractorOrNull : Extractors.getDefaultExtractor();\n\n        // $.trim trims leading/trailing whitespaces\n        // $rowList[i].cells[colIdx - 1] is where we get the table cell from\n        const textToCompare = $.trim(extractor($($rowList[i].cells[colIdx - 1])));\n\n        // Store rows together with the innerText to compare\n        store.push([textToCompare, $rowList[i], i]);\n\n        if ((columnType === 0 || columnType === 1) && isNumber(textToCompare)) {\n            columnType = 1;\n        } else if ((columnType === 0 || columnType === 2) && isDate(textToCompare)) {\n            columnType = 2;\n        } else {\n            columnType = 3;\n        }\n    }\n\n    const comparator = isDefined(comparatorOrNull) ? comparatorOrNull : Comparators.getDefaultComparator(columnType);\n\n    store.sort((x, y) => {\n        const compareResult = shouldSortAscending ? comparator(x[0].toUpperCase(), y[0].toUpperCase())\n                : comparator(y[0].toUpperCase(), x[0].toUpperCase());\n        if (compareResult === 0) {\n            return x[2] - y[2];\n        }\n        return compareResult;\n    });\n\n    // Must rewrap because .get() does not return a jQuery wrapped DOM node\n    // and hence does not have the .children() function\n    let $tbody = $($table.get(0)).children('tbody');\n\n    if ($tbody.size < 1) {\n        $tbody = $table;\n    }\n\n    // Must push to target tbody else it will generate a new tbody for the table\n    for (let j = 0; j < store.length; j += 1) {\n        $tbody.get(0).appendChild(store[j][1]);\n    }\n\n    store = null;\n}\n\n/**\n * Sorts a table\n * @param sortButtonClicked\n *     The jQuery object representing the sort button that was clicked.\n * @param comparatorStringOrNull\n *     String representing the function to compare 2 elements.\n *     May be null.\n * @param extractorStringOrNull\n *     String representing the function to pull out data from a table cell for comparison.\n *     May be null.\n */\nfunction toggleSort($button, comparatorStringOrNull, extractorStringOrNull) {\n    const isSortedAscending = $button.hasClass('button-sort-ascending');\n\n    const $table = TableButtonHelpers.getEnclosingTable($button);\n    const colIdx = TableButtonHelpers.getColumnPositionOfButton($button, 1);\n    const comparatorOrNull = isDefined(comparatorStringOrNull) ? Comparators[comparatorStringOrNull] : null;\n    const extractorOrNull = isDefined(extractorStringOrNull) ? Extractors[extractorStringOrNull] : null;\n    const shouldSortAscending = !isSortedAscending;\n\n    sortTable($table, colIdx, comparatorOrNull, extractorOrNull, shouldSortAscending);\n\n    // update the button and icon states\n    if (shouldSortAscending) {\n        TableButtonHelpers.setButtonToSortedAscending($button);\n    } else {\n        TableButtonHelpers.setButtonToSortedDescending($button);\n    }\n}\n\nexport {\n    Comparators, // for test\n    getPointValue, // for test\n    toggleSort,\n};\n","import {\n    ParamsNames,\n} from './const';\n\n/**\n * Returns the value of a cookie given its name.\n * Returns null if the cookie is not set.\n */\nfunction getCookie(cookieNameToFind) {\n    const cookies = document.cookie.split('; ').map(s => s.split('='));\n\n    for (let i = 0; i < cookies.length; i += 1) {\n        const cookieName = cookies[i][0];\n        const cookieValue = cookies[i][1];\n\n        // the cookie was found in the ith iteration\n        if (cookieName === cookieNameToFind) {\n            return cookieValue;\n        }\n    }\n\n    // the cookie was not found\n    return null;\n}\n\nfunction makeCsrfTokenParam() {\n    return `${ParamsNames.SESSION_TOKEN}=${getCookie(ParamsNames.SESSION_TOKEN)}`;\n}\n\nfunction updateCsrfTokenInInputFields() {\n    const updatedToken = getCookie(ParamsNames.SESSION_TOKEN);\n    if (!updatedToken) {\n        return;\n    }\n    $(`input[name=${ParamsNames.SESSION_TOKEN}]`).val(updatedToken);\n}\n\nexport {\n    makeCsrfTokenParam,\n    updateCsrfTokenInInputFields,\n};\n","import {\n    isWithinView,\n} from './helper';\n\n/**\n * Scrolls the screen to a certain position.\n * @param scrollPos Position to scroll the screen to.\n * @param duration Duration of animation in ms. Scrolling is instant if omitted.\n *                 'fast and 'slow' are 600 and 200 ms respectively,\n *                 400 ms will be used if any other string is supplied.\n */\nfunction scrollToPosition(scrollPos, duration) {\n    if (duration === undefined || duration === null) {\n        $(window).scrollTop(scrollPos);\n    } else {\n        $('html, body').animate({ scrollTop: scrollPos }, duration);\n    }\n}\n\n/**\n * Scrolls to an element.\n * Possible options are as follows:\n *\n * @param element - element to scroll to\n * @param options - associative array with optional values:\n *                  * type: ['top'|'view'], defaults to 'top';\n *                          'top' scrolls to the top of the element,\n *                          'view' scrolls the element into view\n *                  * offset: offset from element to scroll to in px,\n *                            defaults to navbar / footer offset for scrolling from above or below\n *                  * duration: duration of animation,\n *                              defaults to 0 for scrolling without animation\n */\nfunction scrollToElement(element, opts) {\n    const defaultOptions = {\n        type: 'top',\n        offset: 0,\n        duration: 0,\n    };\n\n    const options = opts || {};\n    const type = options.type || defaultOptions.type;\n    let offset = options.offset || defaultOptions.offset;\n    const duration = options.duration || defaultOptions.duration;\n\n    const isViewType = type === 'view';\n    if (isViewType && isWithinView(element)) {\n        return;\n    }\n\n    const navbar = $('.navbar')[0];\n    const navbarHeight = navbar ? navbar.offsetHeight : 0;\n    const footer = $('#footerComponent')[0];\n    const footerHeight = footer ? footer.offsetHeight : 0;\n    const windowHeight = window.innerHeight - navbarHeight - footerHeight;\n\n    const isElementTallerThanWindow = windowHeight < element.offsetHeight;\n    const isFromAbove = window.scrollY < element.offsetTop;\n    const isAlignedToTop = !isViewType || isElementTallerThanWindow || !isFromAbove;\n\n    // default offset - from navbar / footer\n    if (options.offset === undefined) {\n        offset = isAlignedToTop ? navbarHeight * -1 : footerHeight * -1;\n    }\n\n    // adjust offset to bottom of element\n    if (!isAlignedToTop) {\n        offset *= -1;\n        offset += element.offsetHeight - window.innerHeight;\n    }\n\n    const scrollPos = element.offsetTop + offset;\n\n    scrollToPosition(scrollPos, duration);\n}\n\n/**\n * Scrolls the screen to top\n * @param duration Duration of animation in ms. Scrolling is instant if omitted.\n *                 'fast and 'slow' are 600 and 200 ms respectively,\n *                 400 ms will be used if any other string is supplied.\n */\nfunction scrollToTop(duration) {\n    scrollToPosition(0, duration);\n}\n\nexport {\n    scrollToElement,\n    scrollToTop,\n};\n","import {\n    updateCsrfTokenInInputFields,\n} from './crypto';\n\nimport {\n    toggleSort,\n} from './sortBy';\n\n/**\n * Polyfills the String.prototype.includes function finalized in ES6 for browsers that do not yet support the function.\n */\n/* eslint-disable no-extend-native */ // necessary for polyfills\nif (!String.prototype.includes) {\n    String.prototype.includes = function (search, startParam) {\n        const start = typeof startParam === 'number' ? startParam : 0;\n\n        if (start + search.length > this.length) {\n            return false;\n        }\n        return this.indexOf(search, start) !== -1;\n    };\n}\n/* eslint-enable no-extend-native */\n\n/**\n * Checks if the current device is touch based device\n * Reference: https://github.com/Modernizr/Modernizr/blob/master/feature-detects/touchevents.js\n */\nfunction isTouchDevice() {\n    return ('ontouchstart' in window) || (window.DocumentTouch && document instanceof window.DocumentTouch);\n}\n\n$(document).on('click', '.toggle-sort', (e) => {\n    const $button = $(e.currentTarget); // the button clicked on\n\n    const comparatorStringOrNull = $button.data('toggle-sort-comparator');\n    const extractorStringOrNull = $button.data('toggle-sort-extractor');\n\n    toggleSort($button, comparatorStringOrNull, extractorStringOrNull);\n});\n\n$(document).on('ajaxComplete ready', () => {\n    /**\n     * Initializing then disabling is better than simply\n     * not initializing for mobile due to some tooltips-specific\n     * code that throws errors.\n    */\n    const $tooltips = $('[data-toggle=\"tooltip\"]');\n    $tooltips.tooltip({\n        html: true,\n        container: 'body',\n    });\n    if (isTouchDevice()) {\n        $tooltips.tooltip('disable');\n    }\n\n    /**\n     * Underlines all span elements with tool-tips except for\n     * the ones without a text value. This is to exclude elements\n     * such as 'icons' from underlining.\n    */\n    $('span[data-toggle=\"tooltip\"]').each(function () {\n        const textValue = $(this).text().replace(/\\s/g, '');\n        if (textValue) {\n            $(this).addClass('tool-tip-decorate');\n        }\n    });\n\n    /**\n     * Updates the token in input fields with the latest one retrieved from the cookie.\n     * The token becomes outdated once the session expires. The cookie might be updated\n     * with the new token and session during page loads from other browser windows.\n     * The latest value should be retrieved from the cookie before form submission.\n     */\n    $('form').submit(updateCsrfTokenInInputFields);\n});\n","import {\n    BootstrapContextualColors,\n} from './const';\n\nimport {\n    scrollToElement,\n} from './scrollTo';\n\nconst DIV_STATUS_MESSAGE = '#statusMessagesToUser';\n\nfunction buildNewStatusMessageDiv(message, bootstrapContextualColor) {\n    const $newStatusMessageDivContent = $('<div></div>');\n\n    // Default the status type to info if any invalid status is passed in\n    const contextualColor = BootstrapContextualColors.isValidType(bootstrapContextualColor)\n            ? bootstrapContextualColor : BootstrapContextualColors.INFO;\n\n    $newStatusMessageDivContent.addClass(\n            `overflow-auto alert alert-${contextualColor} icon-${contextualColor} statusMessage`);\n    $newStatusMessageDivContent.html(message);\n\n    return $newStatusMessageDivContent;\n}\n\n/**\n * Populates the status div with the message and the message status.\n * Default message type is info.\n *\n * @param message the text message to be shown to the user\n * @param {BootstrapContextualColors} bootstrapContextualColor the contextual color to apply to the status messsage\n * @return created status message div\n */\nfunction populateStatusMessageDiv(message, bootstrapContextualColor) {\n    const $statusMessageDivToUser = $(DIV_STATUS_MESSAGE);\n    const $statusMessageDivContent = buildNewStatusMessageDiv(message, bootstrapContextualColor);\n    $statusMessageDivToUser.empty();\n    $statusMessageDivToUser.append($statusMessageDivContent);\n    return $statusMessageDivToUser;\n}\n\n/**\n * Appends a new message to the status div, leaving existing messages intact.\n * Default message type is info.\n *\n * @param message the text message to be shown to the user\n * @param {BootstrapContextualColors} bootstrapContextualColor the contextual color to apply to the status messsage\n */\nfunction appendNewStatusMessage(message, bootstrapContextualColor) {\n    const $statusMessagesDivToUser = $(DIV_STATUS_MESSAGE);\n    $statusMessagesDivToUser.append(buildNewStatusMessageDiv(message, bootstrapContextualColor));\n    $statusMessagesDivToUser.show();\n    scrollToElement($statusMessagesDivToUser[0], { offset: -window.innerHeight / 2 });\n}\n\n/**\n * Sets a status message and the message status.\n * Default message type is info.\n *\n * @param message the text message to be shown to the user\n * @param {BootstrapContextualColors} bootstrapContextualColor the contextual color to apply to the status messsage\n */\nfunction setStatusMessage(message, bootstrapContextualColor) {\n    if (message === '' || message === undefined || message === null) {\n        return;\n    }\n    const $statusMessageDivToUser = populateStatusMessageDiv(message, bootstrapContextualColor);\n    $statusMessageDivToUser.show();\n    scrollToElement($statusMessageDivToUser[0], { offset: -window.innerHeight / 2 });\n}\n\n/**\n * Sets a status message and the message status to a given form.\n * Default message type is info.\n *\n * @param message the text message to be shown to the user\n * @param {BootstrapContextualColors} bootstrapContextualColor the contextual color to apply to the status messsage\n * @param form form which should own the status\n */\nfunction setStatusMessageToForm(message, bootstrapContextualColor, form) {\n    if (message === '' || message === undefined || message === null) {\n        return;\n    }\n    // Copy the statusMessage and prepend to form\n    const $copyOfStatusMessagesToUser = populateStatusMessageDiv(message, bootstrapContextualColor).clone().show();\n    $(DIV_STATUS_MESSAGE).remove();\n    $(form).prepend($copyOfStatusMessagesToUser);\n    const opts = {\n        offset: -window.innerHeight / 8,\n        duration: 1000,\n    };\n    scrollToElement($copyOfStatusMessagesToUser[0], opts);\n}\n\n/**\n * Appends the status messages panels into the current list of panels of status messages.\n * @param  messages the list of status message panels to be added (not just text)\n *\n */\nfunction appendStatusMessage(messages) {\n    const $statusMessagesToUser = $(DIV_STATUS_MESSAGE);\n\n    $statusMessagesToUser.append($(messages));\n    $statusMessagesToUser.show();\n}\n\n/**\n * Clears the status message div tag and hides it\n */\nfunction clearStatusMessages() {\n    const $statusMessagesToUser = $(DIV_STATUS_MESSAGE);\n\n    $statusMessagesToUser.empty();\n    $statusMessagesToUser.hide();\n}\n\nexport {\n    appendNewStatusMessage,\n    appendStatusMessage,\n    clearStatusMessages,\n    setStatusMessage,\n    setStatusMessageToForm,\n};\n","/* global bootbox:false */\n\nimport {\n    BootstrapContextualColors,\n} from './const';\n\n/**\n * Wrapper for Bootbox.js (available at http://bootboxjs.com/)\n * \"Bootbox.js is a small JavaScript library which allows you to create programmatic dialog boxes using\n *  Bootstrap modals\"\n */\n\nconst DEFAULT_OK_TEXT = 'OK';\nconst DEFAULT_CANCEL_TEXT = 'Cancel';\nconst DEFAULT_YES_TEXT = 'Yes';\nconst DEFAULT_NO_TEXT = 'No';\n\nfunction applyStyleToModal(modal, bootstrapContextualColor) {\n    modal.find('.modal-header').addClass(`alert-${bootstrapContextualColor || BootstrapContextualColors.DEFAULT}`)\n            .find('.modal-title').addClass(`icon-${bootstrapContextualColor || BootstrapContextualColors.DEFAULT}`);\n}\n\n/**\n * Custom alert dialog to replace default alert() function\n * Required params: titleText and messageText\n * Optional params: okButtonText (defaults to \"OK\")\n *                  bootstrapContextualColor (defaults to BootstrapContextualColors.DEFAULT)\n */\nfunction showModalAlert(titleText, messageText, okButtonText, bootstrapContextualColor) {\n    const modal = bootbox.dialog({\n        title: titleText,\n        message: messageText,\n        show: false,\n        buttons: {\n            okay: {\n                label: okButtonText || DEFAULT_OK_TEXT,\n                className: `modal-btn-ok btn-${bootstrapContextualColor || BootstrapContextualColors.DEFAULT}`,\n            },\n        },\n    });\n    applyStyleToModal(modal, bootstrapContextualColor);\n\n    modal.modal('show');\n}\n\n/**\n * Custom confirmation dialog to replace default confirm() function\n * Required params: titleText, messageText and okCallback\n * Optional params: cancelCallBack (defaults to null)\n *                  okButtonText (defaults to \"OK\")\n *                  cancelButtonText (defaults to \"Cancel\")\n *                  bootstrapContextualColor (defaults to BootstrapContextualColors.INFO)\n *                  onHiddenCallback - triggers when the event `hidden.bs.modal` is triggered\n */\nfunction showModalConfirmation(titleText, messageText, okCallback, cancelCallback,\n        okButtonText, cancelButtonText, bootstrapContextualColor, onHiddenCallback) {\n    const modal = bootbox.dialog({\n        title: titleText,\n        message: messageText,\n        onEscape: cancelCallback || true,\n        show: false,\n        buttons: {\n            cancel: {\n                label: cancelButtonText || DEFAULT_CANCEL_TEXT,\n                className: 'modal-btn-cancel btn-default',\n                callback: cancelCallback || null,\n            },\n            ok: {\n                label: okButtonText || DEFAULT_OK_TEXT,\n                className: `modal-btn-ok btn-${bootstrapContextualColor || BootstrapContextualColors.DEFAULT}`,\n                callback: okCallback,\n            },\n        },\n    });\n\n    if (onHiddenCallback) {\n        modal.on('hidden.bs.modal', onHiddenCallback);\n    }\n\n    applyStyleToModal(modal, bootstrapContextualColor);\n\n    modal.modal('show');\n}\n\n/**\n * Custom confirmation dialog to replace default confirm() function\n * Required params: titleText, messageText, yesButtonCallback and noButtonCallback\n * Optional params: cancelButtonCallBack (defaults to null)\n *                  yesButtonText (defaults to \"Yes\")\n *                  noButtonText (defaults to \"No\")\n *                  cancelButtonText (defaults to \"Cancel\")\n *                  bootstrapContextualColor (defaults to BootstrapContextualColors.INFO)\n *                  onHiddenCallback - triggers when the event `hidden.bs.modal` is triggered\n */\nfunction showModalConfirmationWithCancel(titleText, messageText, yesButtonCallback, noButtonCallback,\n        cancelButtonCallback, yesButtonText, noButtonText, cancelButtonText, bootstrapContextualColor,\n        onHiddenCallback) {\n    const modal = bootbox.dialog({\n        title: titleText,\n        message: messageText,\n        onEscape: cancelButtonCallback || true,\n        show: false,\n        buttons: {\n            yes: {\n                label: yesButtonText || DEFAULT_YES_TEXT,\n                className: `modal-btn-ok btn-${bootstrapContextualColor || BootstrapContextualColors.DEFAULT}`,\n                callback: yesButtonCallback,\n            },\n            no: {\n                label: noButtonText || DEFAULT_NO_TEXT,\n                className: `modal-btn-ok btn-${bootstrapContextualColor || BootstrapContextualColors.DEFAULT}`,\n                callback: noButtonCallback,\n            },\n            cancel: {\n                label: cancelButtonText || DEFAULT_CANCEL_TEXT,\n                className: 'modal-btn-cancel btn-default',\n                callback: cancelButtonCallback || null,\n            },\n        },\n    });\n\n    if (onHiddenCallback) {\n        modal.on('hidden.bs.modal', onHiddenCallback);\n    }\n\n    applyStyleToModal(modal, bootstrapContextualColor);\n\n    modal.modal('show');\n}\n\nexport {\n    showModalAlert,\n    showModalConfirmation,\n    showModalConfirmationWithCancel,\n};\n","import {\n    showModalConfirmation,\n} from './bootboxWrapper';\n\nimport {\n    scrollToElement,\n} from './scrollTo';\n\nimport {\n    BootstrapContextualColors,\n    ParamsNames,\n} from './const';\nimport {\n    setStatusMessage,\n} from './statusMessage';\n\nimport {\n    countRemainingCharactersOnInput,\n} from './countRemainingCharactersOnInput';\n\nimport {\n    TimeZone,\n} from './timezone';\n\n/*\n * This JavaScript file is included in all instructor pages. Functions here\n * should be common to some/all instructor pages.\n */\n\n// -----------------------------------------------------------------------------\n\nfunction setupFsCopyModal() {\n    $('#fsCopyModal').on('show.bs.modal', (event) => {\n        const button = $(event.relatedTarget); // Button that triggered the modal\n        const actionlink = button.data('actionlink');\n        const courseid = button.data('courseid');\n        const fsname = button.data('fsname');\n        const appUrl = window.location.origin;\n        const currentPage = window.location.href.substring(appUrl.length); // use the page's relative URL\n\n        $.ajax({\n            type: 'GET',\n            url: `${actionlink}&courseid=${encodeURIComponent(courseid)}&fsname=${encodeURIComponent(fsname)}`\n                    + `&currentPage=${encodeURIComponent(currentPage)}`,\n            beforeSend() {\n                $('#fscopy_submit').prop('disabled', true);\n                $('#courseList').html('Loading possible destination courses. Please wait ...<br>'\n                                      + \"<img class='margin-center-horizontal' src='/images/ajax-loader.gif'/>\");\n            },\n            error() {\n                $('#courseList').html(\"<p id='fs-copy-modal-error'>Error retrieving course list.\"\n                                      + 'Please close the dialog window and try again.</p>');\n            },\n            success(data) {\n                $('#courseList').html(data);\n                // If the user alt-clicks, the form does not send any parameters and results in an error.\n                // Prevent default form submission and submit using jquery.\n                $('#fscopy_submit').off('click')\n                        .on('click', (e) => {\n                            $('#fscopy_submit').prop('disabled', true);\n                            e.preventDefault();\n                            $('#fscopy_submit').closest('form').submit();\n                        });\n                $('#fscopy_submit').prop('disabled', false);\n                countRemainingCharactersOnInput(ParamsNames.COPIED_FEEDBACK_SESSION_NAME);\n            },\n        });\n    });\n\n    $('#instructorCopyModalForm').submit(function (e) {\n        e.preventDefault();\n        const $this = $(this);\n\n        const $copyModalStatusMessage = $('#feedback-copy-modal-status');\n\n        $.ajax({\n            type: 'POST',\n            url: $this.prop('action'),\n            data: $this.serialize(),\n            beforeSend() {\n                $copyModalStatusMessage.removeClass('alert alert-danger');\n                $copyModalStatusMessage.html('<img src=\"/images/ajax-loader.gif\" class=\"margin-center-horizontal\">');\n            },\n            error() {\n                $copyModalStatusMessage.addClass('alert alert-danger');\n                $copyModalStatusMessage.text('There was an error during submission. '\n                                                 + 'Please close the dialog window and try again.');\n            },\n            success(data) {\n                const isError = data.errorMessage !== '';\n                if (!isError && data.redirectUrl) {\n                    window.location.href = data.redirectUrl;\n                } else {\n                    $copyModalStatusMessage.addClass('alert alert-danger');\n                    $copyModalStatusMessage.text(data.errorMessage);\n                    $('#fscopy_submit').prop('disabled', false);\n                }\n            },\n        });\n    });\n}\n\nfunction initializeTimeZoneOptions($selectElement) {\n    if (typeof moment !== 'undefined') {\n        TimeZone.prepareTimeZoneInput($selectElement);\n\n        const existingTimeZone = $selectElement.data('timeZone');\n        if (existingTimeZone) {\n            TimeZone.updateTimeZone($selectElement, existingTimeZone);\n        } else {\n            TimeZone.autoDetectAndUpdateTimeZone($selectElement);\n        }\n\n        $('#auto-detect-time-zone').on('click', () => {\n            TimeZone.autoDetectAndUpdateTimeZone($selectElement);\n        });\n    }\n}\n\n// Student Profile Picture\n// --------------------------------------------------------------------------\n\n/**\n * updates all the student names that show profile picture\n * on hover with the resolved link after one instance of the name\n * has been loaded<br>\n * Helps to avoid clicking view photo when hovering over names of\n * students whose picture has already been loaded elsewhere in the page\n * @param link\n * @param resolvedLink\n */\nfunction updateHoverShowPictureEvents(actualLink, resolvedLink) {\n    $(`.profile-pic-icon-hover[data-link=\"${actualLink}\"]`)\n            .attr('data-link', '')\n            .off('mouseenter mouseleave')\n            .popover('destroy')\n            .popover({\n                html: true,\n                trigger: 'manual',\n                placement: 'top',\n                content() {\n                    return `<img class=\"profile-pic\" src=\"${resolvedLink}\">`;\n                },\n            })\n            .mouseenter(function () {\n                $(this).popover('show');\n                $(this).siblings('.popover').on('mouseleave', function () {\n                    $(this).siblings('.profile-pic-icon-hover').popover('hide');\n                });\n                $(this).mouseleave(function () {\n                    // this is so that the user can hover over the\n                    // pop-over photo without hiding the photo\n                    setTimeout((obj) => {\n                        if ($(obj).siblings('.popover').find(':hover').length === 0) {\n                            $(obj).popover('hide');\n                        }\n                    }, 200, this);\n                });\n            })\n            .children('img[src=\"\"]')\n            .attr('src', resolvedLink);\n}\n\n/**\n * @param elements:\n * identifier that points to elements with\n * class: student-profile-pic-view-link\n */\nfunction bindStudentPhotoLink(elements) {\n    $(elements).on('click', function (e) {\n        const event = e || window.event;\n\n        event.cancelBubble = true;\n\n        if (event.stopPropagation) {\n            event.stopPropagation();\n        }\n\n        const actualLink = $(this).parent().attr('data-link');\n        const $loadingImage = $('<img>').attr('src', '/images/ajax-loader.gif')\n                .addClass('center-block margin-top-7px');\n\n        $(this).siblings('img').attr('src', actualLink).load(function () {\n            const resolvedLink = $(this).attr('src');\n\n            $loadingImage.remove();\n\n            $(this).removeClass('hidden')\n                    .parent().attr('data-link', '')\n                    .popover({\n                        html: true,\n                        trigger: 'manual',\n                        placement: 'top',\n                        content() {\n                            return `<img class=\"profile-pic\" src=\"${resolvedLink}\">`;\n                        },\n                    })\n                    .mouseenter(function () {\n                        $(this).popover('show');\n                        $(this).siblings('.popover').on('mouseleave', function () {\n                            $(this).siblings('.profile-pic-icon-click').popover('hide');\n                        });\n                        $(this).mouseleave(function () {\n                            // this is so that the user can hover over the\n                            // pop-over photo without hiding the photo\n                            setTimeout((obj) => {\n                                if ($(obj).siblings('.popover').find(':hover').length === 0) {\n                                    $(obj).popover('hide');\n                                }\n                            }, 200, this);\n                        });\n                    });\n\n            updateHoverShowPictureEvents(actualLink, resolvedLink);\n        });\n\n        const $imageCell = $(this).closest('td');\n        $(this).remove();\n        $imageCell.append($loadingImage);\n    });\n}\n\n/**\n * completes the loading cycle for showing profile picture\n * for a onhover event\n * @param link\n * @param resolvedLink\n */\nfunction loadProfilePictureForHoverEvent(obj) {\n    obj.children('img')[0].src = obj.attr('data-link');\n\n    const $loadingImage = $('<img>').attr('src', '/images/ajax-loader.gif');\n\n    // load the pictures in all similar links\n    obj.children('img').load(function () {\n        const actualLink = $(this).parent().attr('data-link');\n        const resolvedLink = $(this).attr('src');\n\n        $loadingImage.remove();\n\n        updateHoverShowPictureEvents(actualLink, resolvedLink);\n\n        // this is to show the picture immediately for the one\n        // the user just clicked on\n        $(this).parent()\n                .popover('show')\n                // this is to handle the manual hide action of the popover\n                .siblings('.popover')\n                .on('mouseleave', function () {\n                    $(this).siblings('.profile-pic-icon-hover').popover('hide');\n                });\n    });\n\n    obj.popover('destroy').popover({\n        html: true,\n        trigger: 'manual',\n        placement: 'top',\n        content() {\n            return $loadingImage.get(0).outerHTML;\n        },\n    });\n    obj.popover('show');\n}\n\n/**\n * @param elements:\n * identifier that points to elements with\n * class: profile-pic-icon-hover\n */\nfunction bindStudentPhotoHoverLink(elements) {\n    $(elements)\n            .mouseenter(function () {\n                $(this).popover('show');\n                $(this).siblings('.popover').on('mouseleave', function () {\n                    $(this).siblings('.profile-pic-icon-hover').popover('hide');\n                });\n            })\n            .mouseleave(function () {\n                // this is so that the user can hover over the\n                // pop-over without accidentally hiding the 'view photo' link\n                setTimeout((obj) => {\n                    if ($(obj).siblings('.popover').find('.profile-pic').length !== 0\n                    || $(obj).siblings('.popover').find(':hover').length === 0) {\n                        $(obj).popover('hide');\n                    }\n                }, 200, this);\n            });\n\n    // bind the default popover event for the\n    // show picture onhover events\n    $(elements).popover({\n        html: true,\n        trigger: 'manual',\n        placement: 'top',\n        content() {\n            $('body').on('click', '.cursor-pointer', (event) => {\n                const toLoad = $(event.currentTarget).closest('.popover').siblings('.profile-pic-icon-hover');\n                loadProfilePictureForHoverEvent(toLoad);\n            });\n            return '<a class=\"cursor-pointer\">View Photo</a>';\n        },\n    });\n}\n\nfunction bindDeleteButtons() {\n    $('body').on('click', '.session-delete-for-test', (event) => {\n        event.preventDefault();\n\n        const $button = $(event.currentTarget);\n        const courseId = $button.data('courseid');\n        const feedbackSessionName = $button.data('fsname');\n\n        const messageText = `Are you want to delete the feedback session ${feedbackSessionName} in ${courseId}?`;\n        const okCallback = function () {\n            window.location = $button.attr('href');\n        };\n\n        showModalConfirmation('Confirm deleting feedback session', messageText, okCallback, null,\n                null, null, BootstrapContextualColors.DANGER);\n    });\n}\n\nfunction bindCourseDeleteLinks() {\n    $('body').on('click', '.course-delete-link', (event) => {\n        event.preventDefault();\n\n        const $clickedLink = $(event.currentTarget);\n        const messageText = `Are you sure you want to delete the course: ${$clickedLink.data('courseId')}? `\n                          + 'This operation will delete all students and sessions in this course. '\n                          + 'All instructors of this course will not be able to access it hereafter as well.';\n        const okCallback = function () {\n            window.location = $clickedLink.attr('href');\n        };\n\n        showModalConfirmation('Confirm deleting course', messageText, okCallback, null,\n                null, null, BootstrapContextualColors.DANGER);\n    });\n}\n\nfunction bindSessionDeleteLinks() {\n    $('body').on('click', '#fsDeleteLink', (event) => {\n        event.preventDefault();\n\n        const $clickedLink = $(event.currentTarget);\n        const messageText = 'Are you sure you want to delete the feedback session '\n                + `${$clickedLink.data('feedbackSessionName')} in ${$clickedLink.data('courseId')}?`;\n        const okCallback = function () {\n            window.location = $clickedLink.attr('href');\n        };\n\n        showModalConfirmation('Confirm deleting feedback session', messageText, okCallback, null,\n                null, null, BootstrapContextualColors.DANGER);\n    });\n}\n\nfunction attachEventToSendInviteLink() {\n    $(document).on('click', '.course-student-remind-link', (event) => {\n        event.preventDefault();\n\n        const $clickedLink = $(event.currentTarget);\n        const messageText = 'Usually, there is no need to use this feature because TEAMMATES sends an automatic '\n                + 'invite to students at the opening time of each session. Send a join request anyway?';\n        const okCallback = function okCallback() {\n            $.get($clickedLink.attr('href'), () => {\n                const studentEmail = $clickedLink.parent().siblings(\"td[id|='studentemail']\").html().trim();\n                const message = `An email has been sent to ${studentEmail}`;\n                setStatusMessage(message, 'success');\n            });\n        };\n\n        showModalConfirmation('Confirm sending join request', messageText, okCallback, null,\n                null, null, BootstrapContextualColors.INFO);\n    });\n}\n\nfunction attachEventToDeleteStudentLink() {\n    $(document).on('click', '.course-student-delete-link', (event) => {\n        event.preventDefault();\n\n        const $clickedLink = $(event.currentTarget);\n        const messageText = `Are you sure you want to remove ${$clickedLink.data('studentName')}`\n                + ` from the course ${$clickedLink.data('courseId')}?`;\n        const okCallback = function () {\n            window.location = $clickedLink.attr('href');\n        };\n\n        showModalConfirmation('Confirm deletion', messageText, okCallback, null,\n                null, null, BootstrapContextualColors.DANGER);\n    });\n}\n\nfunction sendRemindersToStudents(urlLink) {\n    const $statusMessage = $('#statusMessagesToUser');\n    $.ajax({\n        type: 'POST',\n        url: urlLink,\n        beforeSend() {\n            $statusMessage.html('<img src=\"/images/ajax-loader.gif\">');\n            $statusMessage.css('display', 'block');\n        },\n        error() {\n            $statusMessage.html('An error has occurred while sending reminder. Please try again.');\n        },\n        success(data) {\n            const statusToUser = $(data).find('#statusMessagesToUser').html();\n            $statusMessage.html(statusToUser);\n\n            scrollToElement($statusMessage[0], { duration: 1000 });\n        },\n    });\n}\n\nfunction resendPublishedEmailToStudents(urlLink) {\n    const $statusMessage = $('#statusMessagesToUser');\n    $.ajax({\n        type: 'POST',\n        url: urlLink,\n        beforeSend() {\n            $statusMessage.html('<img src=\"/images/ajax-loader.gif\">');\n            $statusMessage.css('display', 'block');\n        },\n        error() {\n            $statusMessage.html('An error has occurred while requesting for emails to be resent. Please try again.');\n        },\n        success(data) {\n            const statusToUser = $(data).find('#statusMessagesToUser').html();\n            $statusMessage.html(statusToUser);\n\n            scrollToElement($statusMessage[0], { duration: 1000 });\n        },\n    });\n}\n\nfunction attachEventToDeleteAllStudentLink() {\n    $('body').on('click', '.course-student-delete-all-link', (event) => {\n        event.preventDefault();\n\n        const $clickedLink = $(event.currentTarget);\n        const messageText = `Are you sure you want to remove all students\n                from the course ${$clickedLink.data('courseId')}?`;\n        const okCallback = () => {\n            window.location = $clickedLink.attr('href');\n        };\n\n        showModalConfirmation('Confirm deletion', messageText, okCallback, null,\n                null, null, BootstrapContextualColors.DANGER);\n    });\n}\n\nfunction bindRemindButtons() {\n    $('body').on('click', '.session-remind-inner-for-test, .session-remind-for-test', (event) => {\n        event.preventDefault();\n\n        const $button = $(event.currentTarget);\n        const messageText = 'Send e-mails to remind students who have not submitted their feedback for '\n                + `${$button.data('fsname')}?`;\n        const okCallback = function () {\n            const urlLink = $button.attr('href');\n            sendRemindersToStudents(urlLink);\n        };\n\n        showModalConfirmation('Confirm sending reminders', messageText, okCallback, null,\n                null, null, BootstrapContextualColors.INFO);\n    });\n}\n\nfunction bindPublishButtons() {\n    $('body').on('click', '.session-publish-for-test', function (event) {\n        event.preventDefault();\n\n        const $button = $(this);\n        const feedbackSessionName = $button.data('fsname');\n        let messageText = `Are you sure you want to publish the responses for the session \"${feedbackSessionName}\"?`;\n\n        const isSendingPublishedEmail = $button.data('sending-published-email');\n        if (isSendingPublishedEmail) {\n            messageText += ' An email will be sent to students to inform them that the responses are ready for viewing.';\n        }\n\n        const okCallback = function () {\n            window.location = $button.attr('href');\n        };\n\n        showModalConfirmation('Confirm publishing responses', messageText, okCallback, null,\n                null, null, BootstrapContextualColors.WARNING);\n    });\n}\n\nfunction bindUnpublishButtons() {\n    $('body').on('click', '.session-unpublish-for-test', (event) => {\n        event.preventDefault();\n\n        const $button = $(event.currentTarget);\n        const messageText = `Are you sure you want to unpublish the session \"${$button.data('fsname')}\"?\n                             An email will be sent to students to inform them that the session has been unpublished\n                             and the session responses will no longer be viewable by students.`;\n        const okCallback = function () {\n            window.location = $button.attr('href');\n        };\n\n        showModalConfirmation('Confirm unpublishing responses', messageText, okCallback, null,\n                null, null, BootstrapContextualColors.WARNING);\n    });\n}\n\n// --------------------------------------------------------------------------\n\n/**\n * Selects contents inside an element.\n * @param {HTML DOM Object} elementNode The element to select contents from.\n */\nfunction selectElementContents(elementNode) {\n    const { body } = document;\n    let range;\n    if (document.createRange && window.getSelection) {\n        range = document.createRange();\n        const selection = window.getSelection();\n        selection.removeAllRanges();\n        try {\n            range.selectNodeContents(elementNode);\n            selection.addRange(range);\n        } catch (e) {\n            range.selectNode(elementNode);\n            selection.addRange(range);\n        }\n    } else if (body.createTextRange) {\n        range = body.createTextRange();\n        range.moveToElementText(elementNode);\n        range.select();\n    }\n}\n\n/**\n * Simulates the copy action in the right-click menu, typically 'Ctrl + C'.\n */\nfunction executeCopyCommand() {\n    document.execCommand('copy');\n}\n\n// Initial load-up\n// -----------------------------------------------------------------------------\n\nfunction prepareInstructorPages() {\n    // bind the show picture onclick events\n    bindStudentPhotoLink('.profile-pic-icon-click > .student-profile-pic-view-link');\n\n    // bind the show picture onhover events\n    bindStudentPhotoHoverLink('.profile-pic-icon-hover');\n\n    // bind the event handler to show confirmation modal\n    bindCourseDeleteLinks();\n    bindSessionDeleteLinks();\n}\n\nexport {\n    attachEventToDeleteStudentLink,\n    attachEventToDeleteAllStudentLink,\n    attachEventToSendInviteLink,\n    bindDeleteButtons,\n    bindPublishButtons,\n    bindRemindButtons,\n    bindStudentPhotoHoverLink,\n    bindStudentPhotoLink,\n    bindUnpublishButtons,\n    executeCopyCommand,\n    initializeTimeZoneOptions,\n    prepareInstructorPages,\n    resendPublishedEmailToStudents,\n    selectElementContents,\n    setupFsCopyModal,\n    sendRemindersToStudents,\n};\n","/**\n * Computes the number of characters left in the text input\n * @param $textInput - The text input for which the number of characters are to be counted\n * @param remainingCharactersElementId - The ID of the HTML element that displays the value of the remaining characters\n */\nfunction computeRemainingCharactersCount($textInput, remainingCharactersElementId) {\n    const maxLength = $textInput.attr('maxLength');\n    const currentLength = $textInput.val().length;\n    $(`#${remainingCharactersElementId}`).text(maxLength - currentLength);\n}\n/**\n * Inserts the remaining characters count for the text input into the designated HTML element\n * @param $textInput - The text input for which the number of characters are to be counted\n * @param remainingCharactersElementId - The ID of the HTML element that displays the value of the remaining characters\n */\nfunction insertRemainingCharactersCount($textInput, remainingCharactersElementId) {\n    const maxLength = $textInput.attr('maxlength');\n    if ($(`#${remainingCharactersElementId}`).length === 0) {\n        const charactersLeftSpan = `<span id=\"${remainingCharactersElementId}\">${maxLength}</span>`;\n        const remainingCharactersTemplate = `<div>${charactersLeftSpan} characters left </div>`;\n        $(remainingCharactersTemplate).insertAfter($textInput);\n    }\n}\n\n/**\n * Computes the number of remaining characters left in the text input upon 'input' event\n * @param textInputId - The ID of the text input for which the number of characters are to be counted\n */\nfunction countRemainingCharactersOnInput(textInputId) {\n    const $textInput = $(`#${textInputId}`);\n    const remainingCharactersElementId = `charLeft-${textInputId}`;\n\n    insertRemainingCharactersCount($textInput, remainingCharactersElementId);\n\n    computeRemainingCharactersCount($textInput, remainingCharactersElementId);\n    $textInput.on('input', e => computeRemainingCharactersCount($(e.currentTarget), remainingCharactersElementId));\n}\n\nexport {\n    countRemainingCharactersOnInput,\n};\n","/* global moment:false */\n\nfunction isSupportedByJava(name) {\n    // These short timezones are not supported by Java\n    const badZones = {\n        EST: true, 'GMT+0': true, 'GMT-0': true, HST: true, MST: true, ROC: true,\n    };\n    return !badZones[name];\n}\n\nconst TimeZone = {\n    /**\n     * Generate time zone <option>s using time zone IDs from Moment-Timezone library\n     * and appends it under the specified element.\n     */\n    prepareTimeZoneInput($selectElement) {\n        function addLeadingZeroes(num) {\n            return (num > 9 ? '' : '0') + num;\n        }\n\n        function displayUtcOffset(offset) {\n            if (offset === 0) {\n                return 'UTC';\n            }\n            const hr = Math.floor(Math.abs(offset / 60));\n            const min = Math.abs(offset) % 60;\n            // offset is calculated as the number of minutes needed to get to UTC\n            // thus the +/- sign needs to be swapped\n            return `UTC${offset < 0 ? '+' : '-'}${addLeadingZeroes(hr)}:${addLeadingZeroes(min)}`;\n        }\n\n        moment.tz.names().filter(isSupportedByJava).forEach((name) => {\n            const o = document.createElement('option');\n            const date = new Date();\n            const offset = moment.tz.zone(name).utcOffset(date);\n            o.text = `${name} (${displayUtcOffset(offset)})`;\n            o.value = name;\n            $selectElement.append(o);\n        });\n    },\n\n    /**\n     * Automatically detects the user's time zone based on the local settings\n     * and updates the specified <select> field.\n     */\n    autoDetectAndUpdateTimeZone($selectElement) {\n        const detectedTimeZone = moment.tz.guess();\n        TimeZone.updateTimeZone($selectElement, detectedTimeZone);\n    },\n\n    /**\n     * Updates the specified <select> field with the chosen time zone.\n     */\n    updateTimeZone($selectElement, timeZone) {\n        if (moment.tz.names().filter(isSupportedByJava).indexOf(timeZone) !== -1) {\n            $selectElement.val(timeZone);\n        }\n    },\n};\n\nexport {\n    TimeZone,\n};\n","/**\n * Sets the chevron to point upwards.\n */\nfunction setChevronToUp(chevronContainer) {\n    chevronContainer.removeClass('glyphicon-chevron-down');\n    chevronContainer.addClass('glyphicon-chevron-up');\n}\n\n/**\n * Sets the chevron to point downwards.\n */\nfunction setChevronToDown(chevronContainer) {\n    chevronContainer.removeClass('glyphicon-chevron-up');\n    chevronContainer.addClass('glyphicon-chevron-down');\n}\n\n/**\n * Sets the chevron of a panel from up to down or from down to up depending on its current state.\n * clickedElement must be at least the parent of the chevron.\n */\nfunction toggleChevron(clickedElement) {\n    const $clickedElement = $(clickedElement);\n    const isChevronDown = $clickedElement.find('.glyphicon-chevron-down').length > 0;\n    const $chevronContainer = $clickedElement.find('.glyphicon-chevron-up, .glyphicon-chevron-down');\n\n    // clearQueue to clear the animation queue to prevent animation build up\n    $chevronContainer.clearQueue();\n\n    if (isChevronDown) {\n        setChevronToUp($chevronContainer);\n    } else {\n        setChevronToDown($chevronContainer);\n    }\n}\n\n/**\n * Shows panel's content and changes chevron to point up.\n */\nfunction showSingleCollapse(e) {\n    const heading = $(e).parent().children('.panel-heading');\n    const glyphIcon = $(heading[0]).find('.glyphicon');\n    setChevronToUp($(glyphIcon[0]));\n    $(e).collapse('show');\n    $(heading).find('a.btn').show();\n}\n\n/**\n * Hides panel's content and changes chevron to point down.\n */\nfunction hideSingleCollapse(e) {\n    const heading = $(e).parent().children('.panel-heading');\n    const glyphIcon = $(heading[0]).find('.glyphicon');\n    setChevronToDown($(glyphIcon[0]));\n    $(e).collapse('hide');\n    $(heading).find('a.btn').hide();\n}\n\n/**\n * Changes the state of the panel (collapsed/expanded).\n */\nfunction toggleSingleCollapse(e) {\n    if ($(e.target).is('a') || $(e.target).is('input')) {\n        return;\n    }\n    const glyphIcon = $(this).find('.glyphicon');\n    const className = $(glyphIcon[0]).attr('class');\n    if (className.indexOf('glyphicon-chevron-up') === -1) {\n        showSingleCollapse($(e.currentTarget).attr('data-target'));\n    } else {\n        hideSingleCollapse($(e.currentTarget).attr('data-target'));\n    }\n}\n\nfunction addLoadingIndicator(button, loadingText) {\n    button.html(loadingText);\n    button.prop('disabled', true);\n    button.append('<img src=\"/images/ajax-loader.gif\">');\n}\n\nfunction removeLoadingIndicator(button, displayText) {\n    button.empty();\n    button.html(displayText);\n    button.prop('disabled', false);\n}\n\n/**\n * Highlights all words of searchKey (case insensitive), in a particular section\n * Format of the string  higlight plugin uses - ( ['string1','string2',...] )\n * @param searchKeyId - Id of searchKey input field\n * @param sectionToHighlight - sections to higlight separated by ',' (comma)\n *                             Example- '.panel-body, #panel-data, .sub-container'\n */\nfunction highlightSearchResult(searchKeyId, sectionToHighlight) {\n    const searchKey = $(searchKeyId).val().trim();\n    // split search key string on symbols and spaces and add to searchKeyList\n    let searchKeyList = [];\n    if (searchKey.charAt(0) === '\"' && searchKey.charAt(searchKey.length - 1) === '\"') {\n        searchKeyList.push(searchKey.replace(/\"/g, '').trim());\n    } else {\n        $.each(searchKey.split(/[ \"'.-]/), function () {\n            searchKeyList.push($.trim(this));\n        });\n    }\n    // remove empty elements from searchKeyList\n    searchKeyList = searchKeyList.filter(n => n !== '');\n    $(sectionToHighlight).highlight(searchKeyList);\n}\n\n// Toggle the visibility of additional question information for the specified question.\nfunction toggleAdditionalQuestionInfo(identifier) {\n    const $questionButton = $(`#questionAdditionalInfoButton-${identifier}`);\n\n    if ($questionButton.text() === $questionButton.attr('data-more')) {\n        $questionButton.text($questionButton.attr('data-less'));\n    } else {\n        $questionButton.text($questionButton.attr('data-more'));\n    }\n\n    $(`#questionAdditionalInfo-${identifier}`).toggle();\n}\n\n/**\n * Disallow non-numeric entries\n * [Source: http://stackoverflow.com/questions/995183/how-to-allow-only-numeric-0-9-in-html-inputbox-using-jquery]\n */\nfunction disallowNonNumericEntries(element, decimalPointAllowed, negativeAllowed) {\n    element.on('keydown', (event) => {\n        const key = event.which;\n        // Allow: backspace, delete, tab, escape, enter\n        if ([46, 8, 9, 27, 13].indexOf(key) !== -1\n                // Allow: Ctrl+A\n                || (key === 65 && event.ctrlKey)\n                // Allow: home, end, left, right\n                || (key >= 35 && key <= 39)\n                // Allow dot if decimal point is allowed\n                || (decimalPointAllowed && key === 190)\n                // Allow hyphen if negative is allowed\n                // Code differs by browser (FF/Opera:109, IE/Chrome:189)\n                // see http://www.javascripter.net/faq/keycodes.htm\n                || (negativeAllowed && (key === 189 || key === 109))) {\n            // let it happen, don't do anything\n            return;\n        }\n        // Ensure that it is a number and stop the keypress\n        if (event.shiftKey || ((key < 48 || key > 57) && (key < 96 || key > 105))) {\n            event.preventDefault();\n            event.stopPropagation();\n        }\n    });\n}\n\nexport {\n    addLoadingIndicator,\n    disallowNonNumericEntries,\n    hideSingleCollapse,\n    highlightSearchResult,\n    removeLoadingIndicator,\n    showSingleCollapse,\n    toggleAdditionalQuestionInfo,\n    toggleChevron,\n    toggleSingleCollapse,\n};\n","import {\n    sendRemindersToStudents,\n} from './instructor';\n\nfunction populateCheckBoxes($button) {\n    // if clicked button is on no-response panel, then populate check boxes otherwise not\n    if ($button.hasClass('remind-btn-no-response')) {\n        const $studentList = $('#studentList');\n        const $studentsNotResponded = $studentList.find('.bg-danger');\n        for (let i = 0; i < $studentsNotResponded.length; i += 1) {\n            const $studentNotResponded = $($studentsNotResponded[i]);\n            const $checkbox = $studentNotResponded.find('input[type=\"checkbox\"]');\n            $checkbox.prop('checked', 'true');\n        }\n    }\n}\n\nfunction bindingSelectAllCheckBoxes() {\n    // set default checkboxes as unchecked\n    $('#remindAll').prop('checked', false);\n    $('#remindNotSubmitted').prop('checked', false);\n    // checks binding of select all checkboxes populated in the header\n    $('#remindAll').on('change', function () {\n        if (this.checked) {\n            $('input[class^=\"student-\"]').prop('checked', true);\n            $('#remindNotSubmitted').prop('checked', true);\n        } else {\n            $('input[class^=\"student-\"]').prop('checked', false);\n            $('#remindNotSubmitted').prop('checked', false);\n        }\n    });\n    $('#remindNotSubmitted').on('change', function () {\n        if (this.checked) {\n            $('input[class^=\"student-not-\"]').prop('checked', true);\n            if ($('input[class^=\"student-\"]:checked').length === $('input[class^=\"student-\"]').length) {\n                $('#remindAll').prop('checked', true);\n            }\n        } else {\n            $('input[class^=\"student-not-\"]').prop('checked', false);\n            $('#remindAll').prop('checked', false);\n        }\n    });\n    // checks binding of each checkbox populated in the data\n    $('input[class^=\"student-\"]').on('change', () => {\n        if ($('input[class^=\"student-\"]:checked').length === $('input[class^=\"student-\"]').length) {\n            $('#remindAll').prop('checked', true);\n        } else {\n            $('#remindAll').prop('checked', false);\n        }\n        if ($('input[class^=\"student-not-\"]:checked').length === $('input[class^=\"student-not-\"]').length) {\n            $('#remindNotSubmitted').prop('checked', true);\n        } else {\n            $('#remindNotSubmitted').prop('checked', false);\n        }\n    });\n}\n\nfunction prepareRemindModal() {\n    $('#remindModal').on('show.bs.modal', (event) => {\n        const button = $(event.relatedTarget); // Button that triggered the modal\n        const actionlink = button.data('actionlink');\n\n        $.ajax({\n            type: 'POST',\n            cache: false,\n            url: actionlink,\n            beforeSend() {\n                $('#studentList').html('<img class=\"margin-center-horizontal\" src=\"/images/ajax-loader.gif\"/>');\n                $('#remindModal .remind-particular-button').prop('disabled', true).prop('value', 'Loading...');\n            },\n            error() {\n                $('#studentList').html('Error retrieving student list. Please close the dialog window and try again.');\n            },\n            success(data) {\n                setTimeout(() => {\n                    $('#studentList').html(data);\n                    populateCheckBoxes(button);\n                    $('#remindModal .remind-particular-button').prop('disabled', false).prop('value', 'Remind');\n                    bindingSelectAllCheckBoxes();\n                }, 500);\n            },\n        });\n    });\n    $('#remindModal .remind-particular-button').on('click', (event) => {\n        const $remindButton = $(event.currentTarget);\n        const $form = $remindButton.parents('form:first');\n        const action = $form.attr('action');\n        const formData = $form.serialize();\n        const url = `${action}&${formData}`;\n        sendRemindersToStudents(url);\n    });\n}\n\nexport {\n    prepareRemindModal,\n};\n","import {\n    bindPublishButtons,\n    bindStudentPhotoHoverLink,\n    bindStudentPhotoLink,\n    bindUnpublishButtons,\n    selectElementContents,\n} from './instructor';\n\nimport {\n    prepareRemindModal,\n} from './remindModal';\n\nimport {\n    setStatusMessage,\n} from './statusMessage';\n\nimport {\n    hideSingleCollapse,\n    showSingleCollapse,\n    toggleSingleCollapse,\n} from './ui';\n\nfunction submitFormAjax() {\n    const formObject = $('#csvToHtmlForm');\n    const formData = formObject.serialize();\n    const content = $('#fsModalTable');\n    const ajaxStatus = $('#ajaxStatus');\n\n    const retryButtonHtml = '<button class=\"btn btn-info\" id=\"instructorFeedbackResultsRetryButton\"> retry</button>';\n    $('#instructorFeedbackResultsRetryButton').on('click', submitFormAjax);\n\n    $.ajax({\n        type: 'POST',\n        url: `/page/instructorFeedbackResultsPage?${formData}`,\n        beforeSend() {\n            content.html('<img src=\"/images/ajax-loader.gif\">');\n        },\n        error() {\n            ajaxStatus.html('Failed to load results table. Please try again.');\n            content.html(retryButtonHtml);\n        },\n        success(data) {\n            setTimeout(() => {\n                if (data.isError) {\n                    ajaxStatus.html(data.errorMessage);\n                    content.html(retryButtonHtml);\n                } else {\n                    const table = data.sessionResultsHtmlTableAsString;\n                    content.html(`<small>${table}</small>`);\n                    ajaxStatus.html(data.ajaxStatus);\n                    selectElementContents(content.get(0));\n                }\n                setStatusMessage(data.statusForAjax);\n            }, 500);\n        },\n    });\n}\n\n// Show/hide stats\nfunction showHideStats() {\n    if ($('#show-stats-checkbox').is(':checked')) {\n        $('.resultStatistics').show();\n    } else {\n        $('.resultStatistics').hide();\n    }\n}\n\n// Toggles Rubric Questions excluding self\nfunction toggleExcludingSelfResultsForRubricStatistics(checkbox) {\n    if ($(checkbox).prop('checked')) {\n        $(checkbox).closest('.rubricStatistics')\n                .find('.table-body-including-self')\n                .addClass('hidden');\n        $(checkbox).closest('.rubricStatistics')\n                .find('.table-body-excluding-self')\n                .removeClass('hidden');\n    } else {\n        $(checkbox).closest('.rubricStatistics')\n                .find('.table-body-including-self')\n                .removeClass('hidden');\n        $(checkbox).closest('.rubricStatistics')\n                .find('.table-body-excluding-self')\n                .addClass('hidden');\n    }\n}\n\n/**\n * @return {DOM} the element that needs to be clicked to trigger AJAX-loading of data to the panel,\n *         identified by the presence of ajax_auto or ajax-response-auto class(not both) attached to the\n *         element.\n */\nfunction getElementToClickForAjaxLoading(panel) {\n    let $elementWithAjaxClass = $(panel).parent().children('.ajax_auto');\n    if ($elementWithAjaxClass.length === 0) {\n        $elementWithAjaxClass = $(panel).parent().children('.ajax-response-auto');\n    }\n    return $elementWithAjaxClass;\n}\n\n/**\n * Expands {@code panel}. If the panel data is not loaded, load it by Ajax.\n * @param {int} timeOut - is in milliseconds\n */\nfunction expandPanel(panel, timeOut, isAjaxLoadedPanel) {\n    const isPanelAlreadyExpanded = $(panel).hasClass('in');\n    if (isPanelAlreadyExpanded) {\n        return;\n    }\n\n    if (isAjaxLoadedPanel) { // Might need to load the panel data by Ajax.\n        const $elementToClickForAjaxLoading = getElementToClickForAjaxLoading(panel);\n        const needToLoadThePanelDataByClickingOnElement = $elementToClickForAjaxLoading.length !== 0;\n        if (needToLoadThePanelDataByClickingOnElement) {\n            // When clicked, the panel data is loaded, and ajax_auto or ajax-response-auto class will\n            // be removed from the element.\n            $elementToClickForAjaxLoading.click();\n\n            // Panel is already expanded as a result of clicking.\n            return;\n        }\n    }\n\n    // Expands this panel.\n    setTimeout(showSingleCollapse, timeOut, panel);\n}\n\n/**\n * Expands all panels. Loads panel data if missing.\n */\nfunction expandPanels(panels, areAjaxLoadedPanels) {\n    const BASE_TIMEOUT_UNIT_IN_MILLI_SECONDS = 50;\n\n    for (let idx = 0; idx < panels.length; idx += 1) {\n        expandPanel(panels[idx], idx * BASE_TIMEOUT_UNIT_IN_MILLI_SECONDS, areAjaxLoadedPanels);\n    }\n}\n\nfunction collapsePanels(panels) {\n    const BASE_TIMEOUT_UNIT_IN_MILLI_SECONDS = 100;\n\n    for (let idx = 0; idx < panels.length; idx += 1) {\n        const isPanelAlreadyCollapsed = !$(panels[idx]).hasClass('in');\n        if (isPanelAlreadyCollapsed) {\n            continue;\n        }\n        // Collapses this panel.\n        setTimeout(hideSingleCollapse, idx * BASE_TIMEOUT_UNIT_IN_MILLI_SECONDS, panels[idx]);\n    }\n}\n\nfunction replaceButtonHtmlAndTooltipText(button, from, to) {\n    // Replaces html text of the {@code button}.\n    let htmlString = $(button).html();\n    htmlString = htmlString.replace(from, to);\n    $(button).html(htmlString);\n\n    // Replaces tooltip text of the {@code button}.\n    const tooltipString = $(button).attr('data-original-title').replace(from, to);\n    $(button).attr('title', tooltipString).tooltip('fixTitle').tooltip('show');\n}\n\n/**\n * Expands or collapses all panels when collapse/expand panels button is clicked.\n * @param {DOM} expandCollapseButton - The button that was clicked to invoke {@code #expandOrCollapsePanels}.\n * @param {DOM} panels - The panels to be expanded/collapsed. Not defined if {@code expandCollapseButton}\n *         is collapse panels button.\n */\nfunction expandOrCollapsePanels(expandCollapseButton, panels) {\n    const STRING_EXPAND = 'Expand';\n    const STRING_COLLAPSE = 'Collapse';\n    // {@code panels} is not defined when {@code expandCollapseButton} is collapse panels button. We\n    // need to define corresponding {@code targetPanels}.\n    const targetPanels = panels || $('div.panel-collapse');\n\n    const isButtonInExpandMode = $(expandCollapseButton).html().trim().startsWith(STRING_EXPAND);\n    if (isButtonInExpandMode) {\n        // The expand/collapse button on AJAX-loaded panels has id collapse-panels-button.\n        const areAjaxLoadedPanels = $(expandCollapseButton).is($('#collapse-panels-button'));\n        expandPanels(targetPanels, areAjaxLoadedPanels);\n        replaceButtonHtmlAndTooltipText(expandCollapseButton, STRING_EXPAND, STRING_COLLAPSE);\n    } else {\n        collapsePanels(targetPanels);\n        replaceButtonHtmlAndTooltipText(expandCollapseButton, STRING_COLLAPSE, STRING_EXPAND);\n    }\n}\n\nfunction bindCollapseEvents(panels, nPanels) {\n    let numPanels = nPanels;\n    for (let i = 0; i < panels.length; i += 1) {\n        const heading = $(panels[i]).children('.panel-heading');\n        const bodyCollapse = $(panels[i]).children('.panel-collapse');\n        if (heading.length !== 0 && bodyCollapse.length !== 0) {\n            numPanels += 1;\n            // Use this instead of the data-toggle attribute to let [more/less] be clicked without collapsing panel\n            if ($(heading[0]).attr('class') === 'panel-heading') {\n                $(heading[0]).click(toggleSingleCollapse);\n            }\n\n            let sectionIndex = '';\n\n            /*\n             * There is one call of bindCollapseEvents() for outer section panels and one call per request\n             * for every section's content.\n             * For outer section panels we add prefix in format \"-section-<sectionIndex>\".\n             * For panels inside section we add prefix in format \"-<sectionIndex>-\". This is done in order\n             * to have fixed IDs for panels regardless of asynchronous execution of requests.\n            */\n            let isSectionPanel = true;\n            let sectionBody = $(heading).next().find('[id^=\"sectionBody-\"]');\n\n            if (sectionBody.length === 0) {\n                sectionBody = $(heading).parents('[id^=\"sectionBody-\"]');\n                isSectionPanel = false;\n            }\n\n            if (sectionBody.length !== 0) {\n                sectionIndex = `${sectionBody.attr('id').match(/sectionBody-(\\d+)/)[1]}-`;\n                if (isSectionPanel) {\n                    sectionIndex = `section-${sectionIndex}`;\n                }\n            }\n\n            $(heading[0]).attr('data-target', `#panelBodyCollapse-${sectionIndex}${numPanels}`);\n            $(heading[0]).attr('id', `panelHeading-${sectionIndex}${numPanels}`);\n            $(heading[0]).css('cursor', 'pointer');\n            $(bodyCollapse[0]).attr('id', `panelBodyCollapse-${sectionIndex}${numPanels}`);\n        }\n    }\n    return numPanels;\n}\n\n/**\n * For ajax error handling.\n * Given an element in the panel heading, replaces the HTML content of the element with an error message prompting\n * the user to retry.\n */\nfunction displayAjaxRetryMessageForPanelHeading($element) {\n    const ajaxErrorStart = '<div class=\"ajax-error\">';\n    const warningSign = '<span class=\"glyphicon glyphicon-warning-sign\"></span>';\n    const errorMsgCenter = '[ Failed to load. Click here to retry. ]';\n    const errorMsg = `<strong style=\"margin-left: 1em; margin-right: 1em;\">${errorMsgCenter}</strong>`;\n    const chevronDown = '<span class=\"glyphicon glyphicon-chevron-down\"></span>';\n    const ajaxErrorEnd = '</div>';\n    $element.html(ajaxErrorStart + warningSign + errorMsg + chevronDown + ajaxErrorEnd);\n}\n\nfunction isEmptySection(content) {\n    const panelsInSection = content.find('div.panel');\n\n    return panelsInSection.length === 0;\n}\n\nfunction removeSection(id) {\n    const $heading = $(`[id^=panelHeading-section-${id}]`);\n\n    $heading.parent().remove();\n}\n\nfunction getAppendedResponseRateData(data) {\n    const appendedResponseStatus = $(data).find('#responseStatus').html();\n    $(data).remove();\n    return appendedResponseStatus;\n}\n\nfunction toggleNoResponsePanel(e) {\n    const $targetElement = $(e.target);\n    if ($targetElement.is('a') || $targetElement.is('input')) {\n        return;\n    }\n    const $panel = $(this);\n    const $remindButton = $panel.find('.remind-no-response');\n    if ($panel.data('state') === 'up') {\n        $remindButton.show();\n        showSingleCollapse($(e.currentTarget).data('target'));\n        $panel.data('state', 'down');\n    } else {\n        $remindButton.hide();\n        hideSingleCollapse($(e.currentTarget).data('target'));\n        $panel.data('state', 'up');\n    }\n}\n\nfunction prepareInstructorFeedbackResultsPage() {\n    const participantPanelType = 'div.panel.panel-primary,div.panel.panel-default';\n\n    $('a[id^=\"collapse-panels-button-section-\"]').on('click', (e) => {\n        const isGroupByTeam = $('#frgroupbyteam').prop('checked');\n        const childPanelType = isGroupByTeam ? 'div.panel.panel-warning' : participantPanelType;\n        const panels = $(e.currentTarget).closest('.panel-success')\n                .children('.panel-collapse')\n                .find(childPanelType)\n                .children('.panel-collapse');\n        expandOrCollapsePanels(e.currentTarget, panels);\n    });\n\n    $('.panel.panel-success').on('click', 'a[id^=\"collapse-panels-button-team-\"]', (e) => {\n        const panels = $(e.currentTarget).closest('.panel-warning')\n                .children('.panel-collapse')\n                .find(participantPanelType)\n                .children('.panel-collapse');\n        expandOrCollapsePanels(e.currentTarget, panels);\n    });\n\n    if ($('.panel-success').length >= 1 || $('.panel-info').length >= 1 || $('.panel-default').length >= 1) {\n        $('#collapse-panels-button').show();\n    } else {\n        $('#collapse-panels-button').hide();\n    }\n\n    // Show/Hide statistics\n    showHideStats();\n    $('#show-stats-checkbox').change(showHideStats);\n\n    const panels = $('div.panel');\n    bindCollapseEvents(panels, 0);\n\n    bindPublishButtons();\n    bindUnpublishButtons();\n\n    $('#button-print').on('click', () => {\n        $('#mainContent').printThis({\n            importCSS: true,\n            importStyle: true,\n            loadCSS: '/stylesheets/printview.css',\n        });\n    });\n\n    const responseRateRequest = function (e) {\n        const panelHeading = $(this);\n        const displayIcon = $(this).children('.display-icon');\n        const formObject = $(this).children('form');\n        const panelCollapse = $(this).parent().children('.panel-collapse');\n        const formData = formObject.serialize();\n        e.preventDefault();\n        $.ajax({\n            type: 'POST',\n            url: `${$(formObject[0]).attr('action')}?${formData}`,\n            beforeSend() {\n                displayIcon.html('<img height=\"25\" width=\"25\" src=\"/images/ajax-preload.gif\">');\n                // submitButton.html('<img src=\"/images/ajax-loader.gif\">');\n            },\n            error() {\n                displayAjaxRetryMessageForPanelHeading(displayIcon);\n            },\n            success(data) {\n                const remindButtonContent = $(data).find('.remind-no-response')[0];\n                $(panelCollapse[0]).html(getAppendedResponseRateData(data));\n                const $panelHeading = $(panelHeading);\n                $panelHeading.removeClass('ajax-response-submit');\n                $panelHeading.removeClass('ajax-response-auto');\n                $panelHeading.off('click');\n                displayIcon.html(remindButtonContent);\n                displayIcon.append('<span class=\"glyphicon glyphicon-chevron-down pull-right\"></span>');\n                $panelHeading.data('state', 'up');\n                $panelHeading.click(toggleNoResponsePanel);\n                $panelHeading.trigger('click');\n                prepareRemindModal();\n            },\n        });\n    };\n\n    // ajax-response-submit requires the user to click on it to load the noResponsePanel,\n    // ajax-response-auto automatically loads the noResponsePanel when the page is loaded\n    const $responseRatePanel = $('.ajax-response-submit,.ajax-response-auto');\n    $responseRatePanel.click(responseRateRequest);\n\n    $('#collapse-panels-button').on('click', (e) => {\n        expandOrCollapsePanels(e.currentTarget);\n    });\n\n    $('#btn-select-element-contents').on('click', () => {\n        selectElementContents($('#fsModalTable').get(0));\n    });\n\n    $('#btn-display-table').on('click', () => {\n        submitFormAjax();\n    });\n}\n\nconst seeMoreRequest = function (e) {\n    const $panelHeading = $(this);\n    if ($('#show-stats-checkbox').is(':checked')) {\n        $panelHeading.find('[id^=\"showStats-\"]').val('on');\n    } else {\n        $panelHeading.find('[id^=\"showStats-\"]').val('off');\n    }\n\n    const displayIcon = $panelHeading.find('.display-icon');\n    const formObject = $panelHeading.children('form');\n    const panelCollapse = $panelHeading.parent().children('.panel-collapse');\n    const panelBody = $(panelCollapse[0]).children('.panel-body');\n    const formData = formObject.serialize();\n    e.preventDefault();\n    $.ajax({\n        type: 'POST',\n        cache: false,\n        url: `${$(formObject[0]).attr('action')}?${formData}`,\n        beforeSend() {\n            displayIcon.html('<img height=\"25\" width=\"25\" src=\"/images/ajax-preload.gif\">');\n        },\n        error() {\n            displayAjaxRetryMessageForPanelHeading(displayIcon);\n        },\n        success(data) {\n            const $sectionBody = $(panelBody[0]);\n\n            if (typeof data === 'undefined') {\n                $sectionBody.html('The results is too large to be viewed. '\n                    + 'Please choose to view the results by questions or download the results.');\n            } else {\n                const $appendedSection = $(data).find('#sectionBody-0');\n\n                if (isEmptySection($appendedSection)) {\n                    $sectionBody.html('There are no responses for this section yet '\n                        + 'or you do not have access to the responses collected so far.');\n                }\n\n                $(data).remove();\n                if (typeof $appendedSection === 'undefined') {\n                    $sectionBody.html('There are no responses for this section yet '\n                        + 'or you do not have access to the responses collected so far.');\n                } else {\n                    $sectionBody.html($appendedSection.html());\n                }\n            }\n\n            // bind the show picture onclick events\n            bindStudentPhotoLink($sectionBody.find('.profile-pic-icon-click > .student-profile-pic-view-link'));\n            // bind the show picture onhover events\n            bindStudentPhotoHoverLink($sectionBody.find('.profile-pic-icon-hover'));\n\n            $panelHeading.removeClass('ajax_auto');\n            $panelHeading.off('click');\n            displayIcon.html('<span class=\"glyphicon glyphicon-chevron-down\"></span>');\n            const childrenPanels = $sectionBody.find('div.panel');\n            bindCollapseEvents(childrenPanels, 0);\n\n            $panelHeading.click(toggleSingleCollapse);\n            $panelHeading.trigger('click');\n            showHideStats();\n        },\n    });\n};\n\nexport {\n    bindCollapseEvents,\n    displayAjaxRetryMessageForPanelHeading,\n    isEmptySection,\n    prepareInstructorFeedbackResultsPage,\n    removeSection,\n    showHideStats,\n    seeMoreRequest,\n    toggleExcludingSelfResultsForRubricStatistics,\n};\n","import {\n    Const,\n    BootstrapContextualColors,\n} from './const';\n\nimport {\n    showModalConfirmation,\n} from './bootboxWrapper';\n\n/**\n * Contains functions common to the student pages.\n */\nfunction bindLinksInUnregisteredPage(selector) {\n    $(document).on('click', selector, (e) => {\n        e.preventDefault();\n        const $clickedLink = $(e.currentTarget);\n\n        const { header, text } = Const.ModalDialog.UNREGISTERED_STUDENT;\n        function okCallback() {\n            window.location = $clickedLink.attr('href');\n        }\n\n        showModalConfirmation(header, text, okCallback, null, null, null, BootstrapContextualColors.INFO);\n    });\n}\n\nexport {\n    bindLinksInUnregisteredPage,\n};\n","import {\n    bindLinksInUnregisteredPage,\n} from '../common/student';\n\nimport {\n    toggleAdditionalQuestionInfo,\n} from '../common/ui';\n\nimport {\n    toggleExcludingSelfResultsForRubricStatistics,\n} from '../common/instructorFeedbackResults';\n\nwindow.toggleAdditionalQuestionInfo = toggleAdditionalQuestionInfo;\nwindow.toggleExcludingSelfResultsForRubricStatistics = toggleExcludingSelfResultsForRubricStatistics;\n\n$(document).ready(() => {\n    bindLinksInUnregisteredPage('[data-unreg].navLinks');\n});\n"],"sourceRoot":""}